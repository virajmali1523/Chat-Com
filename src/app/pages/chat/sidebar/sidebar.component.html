<div class="sidebar-container">


  <div *ngIf="!editMode" class="profile-view">
    <img [src]="previewUrl" class="sidebar-avatar" />
    <h4>{{ displayName }}</h4>
    <p><strong>Email:</strong> {{ email }}</p>
    <p><strong>UID:</strong> {{ uid }}</p>
    <button (click)="toggleEdit()"> Edit Profile</button>
    <button (click)="logout()">Logout</button>
  </div>


  <div *ngIf="editMode" class="profile-form">
    <h3>Setup Your Profile</h3>

    <div class="image-preview">
      <img [src]="previewUrl" class="sidebar-avatar" />
      <label for="fileInput" class="upload-icon">
        <input type="file" id="fileInput" hidden (change)="onFileSelected($event)" />
        +
      </label>
    </div>

    <form (ngSubmit)="saveProfile()">
      <div class="form-group">
        <label>Display Name</label>
        <input [(ngModel)]="displayName" name="displayName" required />
      </div>

      <div class="form-group">
        <label>Bio</label>
        <textarea [(ngModel)]="bio" name="bio" rows="3"></textarea>
      </div>

      <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success">{{ successMessage }}</div>

      <button type="submit" [disabled]="loading">
        {{ loading ? 'Saving...' : 'Save Profile' }}
      </button>
    </form>
  </div>

</div>
